/*!
 * A lightweight, dependency-free and responsive javascript plugin for particle backgrounds.
 * 
 * @author Marc Bruederlin <hello@marcbruederlin.com>
 * @version 2.0.2
 * @license MIT
 * @see https://github.com/marcbruederlin/particles.js
 */
var Particles=function(e,t){"use strict";var o,n={};return o=function(){function e(){var e=this;e.defaults={responsive:null,selector:null,maxParticles:100,sizeVariations:3,speed:.5,color:"#000000",minDistance:120,connectParticles:!1,connectLineWidth:1,baseRadius:1,redrawOnMobileResize:!1},e.element=null,e.context=null,e.ratio=null,e.breakpoints=[],e.activeBreakpoint=null,e.breakpointSettings=[],e.originalSettings=null,e.storage=[]}return e}(),o.prototype.init=function(e){var t=this;t.options=t._extend(t.defaults,e),t.options.color=e.color?t._hex2rgb(e.color):t._hex2rgb(t.defaults.color),t.options.connectColor=e.connectColor?t._hex2rgb(e.connectColor):t.options.color,t.originalSettings=JSON.parse(JSON.stringify(t.options)),t._initializeCanvas(),t._initializeEvents(),t._registerBreakpoints(),t._checkResponsive(),t._initializeStorage(),t._animate()},o.prototype._initializeCanvas=function(){var o,n,i=this;if(!i.options.selector)return console.warn("particles.js: No selector specified! Check https://github.com/marcbruederlin/particles.js#options"),!1;i.element=t.querySelector(i.options.selector),i.context=i.element.getContext("2d"),o=e.devicePixelRatio||1,n=i.context.webkitBackingStorePixelRatio||i.context.mozBackingStorePixelRatio||i.context.msBackingStorePixelRatio||i.context.oBackingStorePixelRatio||i.context.backingStorePixelRatio||1,i.ratio=o/n,i.element.width=i.element.offsetParent.clientWidth*i.ratio,"BODY"==i.element.offsetParent.nodeName?i.element.height=e.innerHeight*i.ratio:i.element.height=i.element.offsetParent.clientHeight*i.ratio,i.element.style.width="100%",i.element.style.height="100%",i.context.scale(i.ratio,i.ratio)},o.prototype._initializeEvents=function(){var t=this;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?redrawOnMobileResize?e.addEventListener("resize",t._resize.bind(t),!1):e.addEventListener("orientationchange",t._resize.bind(t),!1):e.addEventListener("resize",t._resize.bind(t),!1)},o.prototype._initializeStorage=function(){var e=this;e.storage=[];for(var t=e.options.maxParticles;t--;)e.storage.push(new n(e.context,e.options))},o.prototype._registerBreakpoints=function(){var e,t,o,n=this,i=n.options.responsive||null;if("object"==typeof i&&null!==i&&i.length){for(e in i)if(o=n.breakpoints.length-1,t=i[e].breakpoint,i.hasOwnProperty(e)){for(i[e].options.color&&(i[e].options.color=i[e].options.connectColor=n._hex2rgb(i[e].options.color)),i[e].options.connectColor&&(i[e].options.connectColor=n._hex2rgb(i[e].options.connectColor));o>=0;)n.breakpoints[o]&&n.breakpoints[o]===t&&n.breakpoints.splice(o,1),o--;n.breakpoints.push(t),n.breakpointSettings[t]=i[e].options}n.breakpoints.sort(function(e,t){return t-e})}},o.prototype._checkResponsive=function(){var t,o=this,n=!1,i=e.innerWidth;if(o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){n=null;for(t in o.breakpoints)o.breakpoints.hasOwnProperty(t)&&i<=o.breakpoints[t]&&(n=o.breakpoints[t]);null!==n?(o.activeBreakpoint=n,o.options=o._extend(o.options,o.breakpointSettings[n])):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,n=null,o.options=o._extend(o.options,o.originalSettings))}},o.prototype._refresh=function(){var e=this;e._initializeStorage(),e._update()},o.prototype._resize=function(){var t=this;t.element.width=t.element.offsetParent.clientWidth*t.ratio,"BODY"==t.element.offsetParent.nodeName?t.element.height=e.innerHeight*t.ratio:t.element.height=t.element.offsetParent.clientHeight*t.ratio,t.context.scale(t.ratio,t.ratio),clearTimeout(t.windowDelay),t.windowDelay=e.setTimeout(function(){t._checkResponsive(),t._refresh()},50)},o.prototype._animate=function(){var t=this;t._draw(),e.requestAnimFrame(t._animate.bind(t))},o.prototype._draw=function(){var e=this;e.context.clearRect(0,0,e.element.width,e.element.height);for(var t=e.storage.length;t--;){e.storage[t]._draw()}e._update()},o.prototype._update=function(){var t=this,o=t.element.offsetParent.clientWidth;if("BODY"==t.element.offsetParent.nodeName)var n=e.innerHeight;else var n=t.element.offsetParent.clientHeight;for(var i=t.storage.length;i--;){var r=t.storage[i];if(r.x+=r.vx,r.y+=r.vy,r.x+r.radius>o?r.x=r.radius:r.x-r.radius<0&&(r.x=o-r.radius),r.y+r.radius>n?r.y=r.radius:r.y-r.radius<0&&(r.y=n-r.radius),t.options.connectParticles)for(var a=i+1;a<t.storage.length;a++){var s=t.storage[a];t._calculateDistance(r,s)}}},o.prototype._calculateDistance=function(e,t){var o,n=this,i=e.x-t.x,r=e.y-t.y;(o=Math.sqrt(i*i+r*r))<=n.options.minDistance&&(n.context.beginPath(),n.context.strokeStyle="rgba("+n.options.connectColor.r+", "+n.options.connectColor.g+", "+n.options.connectColor.b+", "+(1.2-o/n.options.minDistance)+")",n.context.moveTo(e.x,e.y),n.context.lineTo(t.x,t.y),n.context.lineWidth=n.options.connectLineWidth,n.context.stroke(),n.context.closePath())},o.prototype._extend=function(e,t){return Object.keys(t).forEach(function(o){e[o]=t[o]}),e},o.prototype._hex2rgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},n=function(o,n){var i=this;i.context=o,i.options=n;var r=t.querySelector(i.options.selector);i.x=Math.random()*r.offsetParent.clientWidth,"BODY"==r.offsetParent.nodeName?i.y=Math.random()*e.innerHeight:i.y=Math.random()*r.offsetParent.clientHeight,i.vx=Math.random()*i.options.speed*2-i.options.speed,i.vy=Math.random()*i.options.speed*2-i.options.speed,i.radius=i.options.baseRadius*Math.ceil(Math.random()*i.options.sizeVariations),i._draw()},n.prototype._draw=function(){var e=this;e.context.fillStyle="rgb("+e.options.color.r+", "+e.options.color.g+", "+e.options.color.b+")",e.context.beginPath(),e.context.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),e.context.fill()},e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),new o}(window,document);!function(){"use strict";"function"==typeof define&&define.amd?define("Particles",function(){return Particles}):"undefined"!=typeof module&&module.exports?module.exports=Particles:window.Particles=Particles}();